<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jurnal Trading Forex - Pro v4.1</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

    <button class="hamburger" id="hamburger-btn"><i class="fas fa-bars"></i></button>

    <nav class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <h3><i class="fas fa-book-open"></i> Jurnal Forex</h3>
        </div>
        <ul class="nav-links">
            <li><a href="#dashboard" class="nav-link active"><i class="fas fa-chart-pie"></i> Dashboard</a></li>
            <li><a href="#transactions" class="nav-link"><i class="fas fa-exchange-alt"></i> Transaksi</a></li>
            <li><a href="#backtesting" class="nav-link"><i class="fas fa-vial"></i> Backtesting</a></li>
            <li><a href="#deposits-withdrawals" class="nav-link"><i class="fas fa-wallet"></i> Deposit & Penarikan</a></li>
            <li><a href="#calculator" class="nav-link"><i class="fas fa-calculator"></i> Kalkulator</a></li>
            <li><a href="#settings" class="nav-link"><i class="fas fa-cog"></i> Pengaturan</a></li>
        </ul>
    </nav>

    <main class="main-content" id="main-content">
        <header class="main-header">
            <h1>Dashboard</h1>
            <div class="user-profile">
                <span>Akun Mikro Anda</span>
            </div>
        </header>

        <section id="dashboard" class="page-section active">
            <div class="stats-grid">
                <div class="stat-card">
                    <h4>Total Saldo</h4>
                    <p id="total-balance">0.00 AUC</p>
                    <i class="fas fa-wallet icon-bg"></i>
                </div>
                <div class="stat-card">
                    <h4>Total Profit/Loss</h4>
                    <p id="total-pnl">0.00 AUC</p>
                    <i class="fas fa-chart-line icon-bg"></i>
                </div>
                <div class="stat-card">
                    <h4>Win Rate</h4>
                    <p id="win-rate">0%</p>
                    <i class="fas fa-trophy icon-bg"></i>
                </div>
                <div class="stat-card">
                    <h4>Total Transaksi</h4>
                    <p id="total-trades">0</p>
                    <i class="fas fa-list-ol icon-bg"></i>
                </div>
            </div>
            <div class="chart-container">
                <h3>Pertumbuhan Akun (AUC)</h3>
                <div class="chart-canvas-wrapper"><canvas id="account-growth-chart"></canvas></div>
            </div>
        </section>

        <section id="transactions" class="page-section">
            <h2>Catatan Transaksi</h2>
            <button id="add-trade-btn" class="btn btn-primary"><i class="fas fa-plus"></i> Tambah Transaksi</button>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>Tanggal</th><th>Simbol</th><th>Tipe</th><th>Lot</th><th>P/L (AUC)</th><th>Detail</th><th>Aksi</th>
                        </tr>
                    </thead>
                    <tbody id="trades-table-body"></tbody>
                </table>
            </div>
        </section>

        <section id="backtesting" class="page-section">
            <h2>Analisis & Backtesting</h2>
            <div class="backtesting-card">
                <h4>Analisis Setup Trading</h4>
                <p>Cari transaksi berdasarkan alasan entry Anda untuk melihat performanya.</p>
                <form id="backtest-form">
                    <div class="form-group">
                        <label for="backtest-reason">Cari Alasan Entry (kata kunci)</label>
                        <input type="text" id="backtest-reason" placeholder="Contoh: 'RSI oversold' atau 'breakout'">
                    </div>
                    <button type="submit" class="btn btn-primary"><i class="fas fa-search"></i> Analisis</button>
                </form>
                <div id="backtest-results-wrapper" class="result-wrapper">
                    <h4>Hasil Analisis:</h4>
                    <div id="backtest-results"></div>
                </div>
            </div>
        </section>

        <section id="deposits-withdrawals" class="page-section">
            <h2>Riwayat Deposit & Penarikan</h2>
            <button id="add-dw-btn" class="btn btn-primary"><i class="fas fa-plus"></i> Tambah Catatan</button>
             <div class="table-container">
                <table>
                    <thead>
                        <tr><th>Tanggal</th><th>Tipe</th><th>Jumlah (AUC)</th><th>Aksi</th></tr>
                    </thead>
                    <tbody id="dw-table-body"></tbody>
                </table>
            </div>
        </section>

        <section id="calculator" class="page-section">
            <h2>Kalkulator Forex</h2>
            <div class="calculator-grid">
                <div class="calc-card">
                    <h4>Kalkulator Ukuran Posisi</h4>
                    <form id="position-size-form">
                        <div class="form-group"><label for="calc-account-balance">Saldo Akun (AUC)</label><input type="number" step="any" id="calc-account-balance" placeholder="1000000" required></div>
                        <div class="form-group"><label for="calc-risk-percentage">Risiko (%)</label><input type="number" step="0.1" id="calc-risk-percentage" value="1" required></div>
                        <div class="form-group"><label for="calc-stop-loss">Stop Loss (pips)</label><input type="number" step="any" id="calc-stop-loss" placeholder="20" required></div>
                        <div class="form-group"><label for="calc-pip-value">Nilai Pip per Lot Mikro (AUC)</label><input type="number" step="any" id="calc-pip-value" value="10" placeholder="10 untuk pair standar" required></div>
                        <button type="submit" class="btn btn-primary">Hitung Ukuran Posisi</button>
                    </form>
                    <div id="position-size-result-wrapper" class="result-wrapper"><div class="calc-result" id="position-size-result"></div></div>
                </div>
            </div>
        </section>

        <section id="settings" class="page-section">
            <h2>Pengaturan Data</h2>
            <div class="settings-grid">
                <div class="settings-card">
                    <h4>Ekspor Data</h4>
                    <p>Simpan cadangan semua data Anda ke dalam sebuah file JSON.</p>
                    <button class="btn btn-secondary" id="export-data-btn"><i class="fas fa-download"></i> Ekspor Data</button>
                </div>
                <div class="settings-card">
                    <h4>Impor Data</h4>
                    <p>Impor data dari file JSON. Perhatian: Ini akan menimpa semua data saat ini.</p>
                    <input type="file" id="import-file-input" accept=".json" hidden>
                    <button class="btn btn-secondary" id="import-data-btn"><i class="fas fa-upload"></i> Pilih File untuk Impor</button>
                    <span id="file-name-display">Tidak ada file dipilih.</span>
                </div>
                 <div class="settings-card">
                    <h4>Hapus Semua Data</h4>
                    <p>Hapus semua catatan trading secara permanen dari browser ini.</p>
                    <button class="btn btn-danger" id="delete-all-data-btn"><i class="fas fa-exclamation-triangle"></i> Hapus Semua Data</button>
                </div>
            </div>
        </section>
    </main>

    <div class="modal-overlay" id="modal-overlay"></div>

    <!-- Modal Tambah Transaksi (Diperbarui) -->
    <div class="modal" id="add-trade-modal">
        <div class="modal-header"><h3>Tambah Transaksi Baru</h3><button class="close-modal-btn">&times;</button></div>
        <div class="modal-body">
            <form id="add-trade-form">
                <div class="form-section">
                    <h4>Data Perdagangan</h4>
                    <div class="form-grid">
                        <div class="form-group"><label for="trade-date">Tanggal</label><input type="date" id="trade-date" required></div>
                        <div class="form-group"><label for="trade-symbol">Simbol</label><input type="text" id="trade-symbol" placeholder="EURUSD" required></div>
                        <div class="form-group"><label for="trade-type">Tipe</label><select id="trade-type" required><option value="Buy">Buy</option><option value="Sell">Sell</option></select></div>
                        <div class="form-group"><label for="trade-lot">Ukuran Lot</label><input type="number" step="0.01" id="trade-lot" placeholder="0.1" required></div>
                    </div>
                     <div class="form-grid">
                        <div class="form-group"><label for="pnl-type">Hasil</label><select id="pnl-type" required><option value="Profit">Profit</option><option value="Loss">Loss</option></select></div>
                        <div class="form-group"><label for="trade-pnl-amount">Jumlah P/L (AUC)</label><input type="number" step="any" id="trade-pnl-amount" placeholder="550.75" required></div>
                    </div>
                </div>
                 <div class="form-section">
                    <h4>Analisis & Jurnal</h4>
                    <div class="form-group"><label for="trade-notes-entry">Alasan Entry</label><textarea id="trade-notes-entry" rows="4" placeholder="Contoh: Breakout dari resistance, RSI oversold, dll."></textarea></div>
                    <div class="form-group"><label for="trade-notes-mistakes">Kesalahan / Pelajaran</label><textarea id="trade-notes-mistakes" rows="4" placeholder="Contoh: Entry terlalu cepat, lupa set SL, dll."></textarea></div>
                </div>
                <button type="submit" class="btn btn-primary">Simpan Transaksi</button>
            </form>
        </div>
    </div>

    <!-- Modal Lihat Detail Transaksi -->
    <div class="modal" id="view-trade-modal">
        <div class="modal-header"><h3 id="view-trade-title">Detail Transaksi</h3><button class="close-modal-btn">&times;</button></div>
        <div class="modal-body" id="view-trade-body">
            <!-- Konten detail akan dimasukkan oleh JS -->
        </div>
    </div>

    <!-- Modal Lainnya (tetap sama) -->
    <div class="modal" id="add-dw-modal">
        <div class="modal-header"><h3>Tambah Deposit/Penarikan</h3><button class="close-modal-btn">&times;</button></div>
        <div class="modal-body">
            <form id="add-dw-form">
                <div class="form-group"><label for="dw-date">Tanggal</label><input type="date" id="dw-date" required></div>
                <div class="form-group"><label for="dw-type">Tipe</label><select id="dw-type" required><option value="Deposit">Deposit</option><option value="Withdrawal">Penarikan</option></select></div>
                <div class="form-group"><label for="dw-amount">Jumlah (AUC)</label><input type="number" step="any" id="dw-amount" placeholder="100000" required></div>
                <button type="submit" class="btn btn-primary">Simpan Catatan</button>
            </form>
        </div>
    </div>
    <div class="modal" id="confirm-modal">
        <div class="modal-header"><h3 id="confirm-title">Konfirmasi</h3><button class="close-modal-btn">&times;</button></div>
        <div class="modal-body">
            <p id="confirm-text">Apakah Anda yakin?</p>
            <div class="confirm-buttons">
                <button id="cancel-btn" class="btn btn-secondary">Batal</button>
                <button id="confirm-btn" class="btn btn-danger">Ya, Lanjutkan</button>
            </div>
        </div>
    </div>

    <div id="toast-notification" class="toast">
        <span id="toast-message">Pesan notifikasi</span>
    </div>
    
    <script src="script.js"></script>
</body>
</html>
